2025-07-14 01:15:14,455 - INFO - Nettoyage et rechargement pour l'utilisateur : e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9
2025-07-14 01:15:16,767 - INFO - Connexion Ó Supabase rÚussie.
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode characters in position 33-34: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 82, in clean_and_reload_data
    logging.info("\U0001f5d1\ufe0f Suppression des donnÚes existantes...")
Message: '\U0001f5d1\ufe0f Suppression des donnÚes existantes...'
Arguments: ()
2025-07-14 01:15:16,778 - INFO - DÚbut de la suppression des donnÚes pour la plateforme 'PretUp'...
2025-07-14 01:15:16,778 - INFO - Suppression des donnÚes de la table 'cash_flows' pour la plateforme 'PretUp'...
2025-07-14 01:15:19,080 - INFO - HTTP Request: DELETE https://ksgdkuixdxoeysmfwgyi.supabase.co/rest/v1/cash_flows?user_id=eq.e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9&platform=eq.PretUp "HTTP/2 200 OK"
2025-07-14 01:15:19,089 - INFO - -> Aucune donnÚe Ó supprimer dans 'cash_flows' pour cette plateforme.
2025-07-14 01:15:19,089 - INFO - Suppression des donnÚes de la table 'expert_metrics_cache' pour la plateforme 'PretUp'...
2025-07-14 01:15:19,188 - INFO - HTTP Request: DELETE https://ksgdkuixdxoeysmfwgyi.supabase.co/rest/v1/expert_metrics_cache?user_id=eq.e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9&platform=eq.PretUp "HTTP/2 200 OK"
2025-07-14 01:15:19,189 - INFO - -> Aucune donnÚe Ó supprimer dans 'expert_metrics_cache' pour cette plateforme.
2025-07-14 01:15:19,189 - INFO - Suppression des donnÚes de la table 'liquidity_balances' pour la plateforme 'PretUp'...
2025-07-14 01:15:19,283 - INFO - HTTP Request: DELETE https://ksgdkuixdxoeysmfwgyi.supabase.co/rest/v1/liquidity_balances?user_id=eq.e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9&platform=eq.PretUp "HTTP/2 200 OK"
2025-07-14 01:15:19,284 - INFO - -> Aucune donnÚe Ó supprimer dans 'liquidity_balances' pour cette plateforme.
2025-07-14 01:15:19,284 - INFO - Suppression des donnÚes de la table 'portfolio_positions' pour la plateforme 'PretUp'...
2025-07-14 01:15:19,379 - INFO - HTTP Request: DELETE https://ksgdkuixdxoeysmfwgyi.supabase.co/rest/v1/portfolio_positions?user_id=eq.e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9&platform=eq.PretUp "HTTP/2 200 OK"
2025-07-14 01:15:19,380 - INFO - -> Aucune donnÚe Ó supprimer dans 'portfolio_positions' pour cette plateforme.
2025-07-14 01:15:19,380 - INFO - Suppression des donnÚes de la table 'investments' pour la plateforme 'PretUp'...
2025-07-14 01:15:19,448 - INFO - HTTP Request: DELETE https://ksgdkuixdxoeysmfwgyi.supabase.co/rest/v1/investments?user_id=eq.e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9&platform=eq.PretUp "HTTP/2 200 OK"
2025-07-14 01:15:19,449 - INFO - -> Aucune donnÚe Ó supprimer dans 'investments' pour cette plateforme.
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u2705' in position 33: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 86, in clean_and_reload_data
    db.clear_platform_data(user_id, platform)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\backend\models\database.py", line 415, in clear_platform_data
    logging.info(f"\u2705 Suppression des donnÚes pour la plateforme '{platform_name}' terminÚe.")
Message: "\u2705 Suppression des donnÚes pour la plateforme 'PretUp' terminÚe."
Arguments: ()
2025-07-14 01:15:19,454 - INFO - Rechargement des donnÚes...
--- Logging error ---
2025-07-14 01:15:19,456 - INFO - ==================================================
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f680' in position 33: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 93, in clean_and_reload_data
    success = load_user_data_auto(user_id, platforms=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 37, in load_user_data_auto
    logging.info("\U0001f680 CHARGEMENT AUTOMATIQUE DONN╔ES PATRIMOINE")
Message: '\U0001f680 CHARGEMENT AUTOMATIQUE DONN╔ES PATRIMOINE'
Arguments: ()
2025-07-14 01:15:20,350 - INFO - Connexion Ó Supabase rÚussie.
2025-07-14 01:15:20,351 - INFO - Validation des fichiers dans data/raw
2025-07-14 01:15:20,351 - INFO - Validation filtrÚe pour les plateformes : pretup
2025-07-14 01:15:21,241 - INFO - Fichier valide: PRETUP: Portefeuille PretUp.xlsx
2025-07-14 01:15:21,241 - INFO - VALIDATION: 1/1 fichiers valides
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4e5' in position 33: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 93, in clean_and_reload_data
    success = load_user_data_auto(user_id, platforms=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 50, in load_user_data_auto
    logging.info(f"\U0001f4e5 DÚbut chargement pour utilisateur: {user_id}")
Message: '\U0001f4e5 DÚbut chargement pour utilisateur: e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4c2' in position 33: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 93, in clean_and_reload_data
    success = load_user_data_auto(user_id, platforms=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 51, in load_user_data_auto
    success = loader.load_all_user_files(user_id, data_folder, platforms_to_load=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\backend\data\data_loader.py", line 237, in load_all_user_files
    logging.info(f"\U0001f4c2 Chargement complet pour utilisateur {user_id} depuis {data_folder}")
Message: '\U0001f4c2 Chargement complet pour utilisateur e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9 depuis data/raw'
Arguments: ()
2025-07-14 01:15:21,246 - INFO - Filtre appliquÚ pour les plateformes : pretup
2025-07-14 01:15:21,246 - INFO - Chargement PRETUP pour utilisateur e8bb01e2-454c-4edb-ba99-f1d2b7dcf4b9
2025-07-14 01:15:21,246 - INFO - Parsing PretUp...
2025-07-14 01:15:21,247 - INFO - DÚbut du parsing pour la plateforme PRETUP avec le fichier : data/raw\Portefeuille PretUp.xlsx
2025-07-14 01:15:21,247 - INFO - DÚbut du parsing PretUp avec la nouvelle mÚthode robuste.
2025-07-14 01:15:21,317 - INFO - Onglets dÚtectÚs dans le fichier : ['RelevÚ compte', 'Recapitulatif', 'Projet Sains - Offres', 'Projets Sains - EchÚances', 'ProcÚdures - Offres', 'ProcÚdures - EchÚances', 'Perdu - Offres', 'Perdu - EchÚances', 'Worksheet']
2025-07-14 01:15:21,323 - INFO - Onglet 'Projet Sains - Offres' (attendu: 'Projet Sains - Offres') chargÚ avec succÞs.
2025-07-14 01:15:21,326 - INFO - Onglet 'ProcÚdures - Offres' (attendu: 'ProcÚdures - Offres') chargÚ avec succÞs.
2025-07-14 01:15:21,330 - INFO - Onglet 'Perdu - Offres' (attendu: 'Perdu - Offres') chargÚ avec succÞs.
2025-07-14 01:15:21,410 - INFO - Onglet 'Projets Sains - EchÚances' (attendu: 'Projets Sains - EchÚances') chargÚ avec succÞs.
2025-07-14 01:15:21,424 - INFO - Onglet 'ProcÚdures - EchÚances' (attendu: 'ProcÚdures - EchÚances') chargÚ avec succÞs.
2025-07-14 01:15:21,431 - INFO - Onglet 'Perdu - EchÚances' (attendu: 'Perdu - EchÚances') chargÚ avec succÞs.
2025-07-14 01:15:21,561 - INFO - Onglet 'RelevÚ compte' (attendu: 'RelevÚ compte') chargÚ avec succÞs.
2025-07-14 01:15:21,657 - INFO - DÚbut du parsing du relevÚ de compte PretUp.
2025-07-14 01:15:21,839 - INFO - Parsing du relevÚ de compte PretUp terminÚ. 154 flux trouvÚs.
2025-07-14 01:15:21,839 - ERROR - Erreur critique lors du parsing de PretUp.
Traceback (most recent call last):
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\backend\data\unified_parser.py", line 660, in _parse_pretup
    liquidity_balance = self._extract_pretup_liquidity(all_data['releve'])
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'UnifiedPortfolioParser' object has no attribute '_extract_pretup_liquidity'. Did you mean: '_extract_pretup_projects'?
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4ca' in position 33: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 93, in clean_and_reload_data
    success = load_user_data_auto(user_id, platforms=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 51, in load_user_data_auto
    success = loader.load_all_user_files(user_id, data_folder, platforms_to_load=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\backend\data\data_loader.py", line 258, in load_all_user_files
    if self.load_platform_data(file_path, plateforme_key, user_id):
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\backend\data\data_loader.py", line 44, in load_platform_data
    logging.info(f"\U0001f4ca DonnÚes parsÚes: {len(investments)} investissements, {len(cash_flows)} flux")
Message: '\U0001f4ca DonnÚes parsÚes: 0 investissements, 0 flux'
Arguments: ()
2025-07-14 01:15:21,849 - WARNING - Aucune donnÚe parsÚe pour PretUp
2025-07-14 01:15:21,849 - WARNING - DonnÚes PretUp invalides
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\U0001f4cb' in position 33: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 93, in clean_and_reload_data
    success = load_user_data_auto(user_id, platforms=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 51, in load_user_data_auto
    success = loader.load_all_user_files(user_id, data_folder, platforms_to_load=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\backend\data\data_loader.py", line 274, in load_all_user_files
    logging.info(f"\U0001f4cb R╔SUM╔ CHARGEMENT: {success_count} source(s) de donnÚes chargÚe(s) avec succÞs.")
Message: '\U0001f4cb R╔SUM╔ CHARGEMENT: 0 source(s) de donnÚes chargÚe(s) avec succÞs.'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u274c' in position 34: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 93, in clean_and_reload_data
    success = load_user_data_auto(user_id, platforms=platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 68, in load_user_data_auto
    logging.error("\u274c ╔CHEC DU CHARGEMENT")
Message: '\u274c ╔CHEC DU CHARGEMENT'
Arguments: ()
--- Logging error ---
Traceback (most recent call last):
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\logging\__init__.py", line 1153, in emit
    stream.write(msg + self.terminator)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\culas\AppData\Local\Programs\Python\Python313\Lib\encodings\cp1252.py", line 19, in encode
    return codecs.charmap_encode(input,self.errors,encoding_table)[0]
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeEncodeError: 'charmap' codec can't encode character '\u274c' in position 34: character maps to <undefined>
Call stack:
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 175, in <module>
    clean_and_reload_data(args.user_id, platforms=args.platforms)
  File "C:\Users\culas\OneDrive\Documents\Finances\Projets\wealth-dashboard\scripts\load_sample_data.py", line 98, in clean_and_reload_data
    logging.error("\u274c ╔chec du rechargement")
Message: '\u274c ╔chec du rechargement'
Arguments: ()
